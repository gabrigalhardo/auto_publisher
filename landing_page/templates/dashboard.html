{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<h1>Bem-vindo, {{ session['user_email'] }}</h1>

<!-- Flash messages -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes">
      {% for msg in messages %}
        <li>{{ msg }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<!-- FormulÃ¡rio de upload -->
<section class="upload-section">
    <h2>Publicar Reels</h2>
    <form action="{{ url_for('upload_video') }}" method="POST" enctype="multipart/form-data">
        <label for="conta">Selecione a conta:</label>
        <select name="conta_id" required>
            {% for conta in contas %}
                <option value="{{ conta.id }}">{{ conta.username }}</option>
            {% endfor %}
        </select>

        <input type="file" name="video" accept="video/*" required>
        <textarea name="legenda" placeholder="Escreva a legenda..."></textarea>
        <input type="datetime-local" name="agendamento" placeholder="Selecione data e hora">
        <button type="submit">Publicar</button>
    </form>
</section>

<script>
flatpickr("input[name=agendamento]", {
    enableTime: true,
    dateFormat: "Y-m-d H:i",
    minDate: "today"
});
</script>
{% endblock %}
