{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<h1>Bem-vindo, {{ current_user.username }}!</h1>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes">
      {% for msg in messages %}
        <li>{{ msg }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<div class="card">
    <h2>Publicar Reels</h2>
    <form action="{{ url_for('upload_video') }}" method="POST" enctype="multipart/form-data">
        
        <label for="conta_id">Selecione a conta:</label>
        <select name="conta_id" id="conta_id" required>
            <option value="" disabled selected>Escolha uma conta</option>
            {% for conta in contas %}
                <option value="{{ conta.id }}">{{ conta.username }}</option>
            {% endfor %}
        </select>

        <label for="video">Selecione o v√≠deo:</label>
        <input type="file" name="video" id="video" accept="video/*" required>
        
        <label for="legenda">Legenda:</label>
        <textarea name="legenda" id="legenda" placeholder="Escreva a legenda..." required></textarea>
        
        <label for="agendamento">Agendar para (opcional):</label>
        <input type="datetime-local" name="agendamento" id="agendamento">
        
        <button type="submit">Publicar</button>
    </form>
</div>

<script>
flatpickr("#agendamento", {
    enableTime: true,
    dateFormat: "Y-m-d H:i",
    minDate: "today"
});
</script>
{% endblock %}