<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Auto Publisher{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>

{% if not hide_sidebar %}
    <!-- Botão toggle só aparece no mobile -->
    <div class="menu-toggle" id="menuToggle">☰ Menu</div>

    <div class="sidebar" id="sidebar">
        <h2>Auto Publisher</h2>
        <ul>
            <li><a href="{{ url_for('dashboard') }}" class="{% if request.endpoint == 'dashboard' %}active{% endif %}">Dashboard</a></li>
            <li><a href="{{ url_for('contas') }}" class="{% if request.endpoint == 'contas' %}active{% endif %}">Gerenciar Contas</a></li>
            <li><a href="{{ url_for('publicacoes') }}" class="{% if request.endpoint == 'publicacoes' %}active{% endif %}">Publicações</a></li>
            <li><a href="{{ url_for('logout') }}">Sair</a></li>
        </ul>
    </div>
{% endif %}

<div class="main-content">
    {% block content %}{% endblock %}
</div>

<script>
// Toggle abre/fecha sidebar
document.getElementById("menuToggle").addEventListener("click", () => {
    document.getElementById("sidebar").classList.toggle("open");
});

// Fecha o menu ao clicar em qualquer link (apenas em telas pequenas)
document.querySelectorAll(".sidebar ul li a").forEach(link => {
    link.addEventListener("click", () => {
        if (window.innerWidth <= 500) { 
            document.getElementById("sidebar").classList.remove("open");
        }
    });
});

// Fecha o menu se a tela for redimensionada para desktop
window.addEventListener("resize", () => {
    if (window.innerWidth > 500) {
        document.getElementById("sidebar").classList.remove("open");
    }
});
</script>

</body>
</html>
